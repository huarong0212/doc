## 后台 zyl.wk2.com是作业啦项目的管理后台

默认传递参数如下 基本上每个接口都会传递的参数

参数名|参数值举例|参数意义
---|---|---
encrypt_response|true|是否加密
imeil|974f8ce3917c47b4|手机标识
app_id|1|应用id     
device_type|2|设备型号  1苹果 2安卓
ts|1551062606881|请求时间     
app_version|4|应用版本号
sys_version|Xiaomi Redmi 3 5.1.1|手机型号
agent_id|1|渠道id
ip|61.183.177.210|ip地址


### 作业啦分别分为以下几个模块
* #### 用户模块user
   * [游客注册](#游客注册)
   * [手机注册](#手机注册)
   * [用户登录](#用户登录)
   * [第三方注册](#第三方注册)
   * [重置密码](#重置密码)
   * [发送验证码](#发送验证码)
   * [更新用户](#更新用户)
   * [绑定手机号码](#绑定手机号码)
   * [获取用户信息](#获取用户信息)
   * [上传用户头像](#上传用户头像)
   * [邀请用户](#邀请用户)
   * [修改用户名](#修改用户名)
   * [用户分享](#用户分享)

* #### 商品订单模块 orders

* #### 新闻文章模块 news

* #### 批改作业模块 homework

* #### 课本点读模块 diandu

* #### 小马音标模块 yinbiao

* #### 广告横幅模块 banner


#### 游客注册
api/user/device_reg

[返回](#用户模块user)

参数名|参数值|参数意义
---|---|---
imeil|974f8ce3917c47b4|手机标识

<pre>
<code>
array (
  'code' => 1,
  'msg' => 'Success',
  'data' =>
  array (
    'user_id' => 20190,
    'name' => '',
    'nick_name' => '',
    'imeil' => '974f8ce3917c47b4',
    'face' => '',
    'mobile' => '',
    'email' => '',
    'type' => 1,
  ),
)
</code>
</pre>

用户游客注册自动生成一个user_id

#### 手机注册  
api/user/phone_reg

参数名|参数值|参数意义
---|---|---
code| 614698|验证码
mobile| 15527240577|手机号码
password| 123456|注册密码
invite_code| CA2X|邀请码可填可不填

<pre>
<code>
array (
  'code' => 1,
  'msg' => 'Success',
  'data' =>
  array (
    'user_id' => 20190,
    'name' => '',
    'nick_name' => '',
    'imeil' => '974f8ce3917c47b4',
    'face' => '',
    'mobile' => '',
    'email' => '',
    'type' => 2,
  ),
)
</code>
</pre>

手机注册账号 注册成功返回user_id注册必须通过验证码验证 如果验证码不正确 返回验证码码错误注册时候 如果邀请码不正确 返回邀请码错误


#### 用户登录    
api/user/login

参数名|参数值|参数意义
---|---|---
mobile| 15527240577|手机号码
password| 123456|密码

<pre>
<code>
array (
  'code' => 1,
  'msg' => 'Success',
  'data' =>
  array (
    'user_id' => 20190,
    'name' => '',
    'nick_name' => '',
    'imeil' => '974f8ce3917c47b4',
    'face' => '',
    'mobile' => '',
    'email' => '',
    'type' => 2,
  ),
)
</code>
</pre>

<pre>
<code>
该接口会判断账号状态 判断账号是否被封，可能返回的错误的msg有
1.你得账号被封，请联系客服
2.密码不正确
3.更新imeil失败
4.记录登录日志失败
</code>
</pre>


#### 第三方注册
api/user/tencent_reg

参数名|参数值|参数意义
---|---|---
access_token| 347A7D80C362109226670B1E1022339F|授权token
type| 3|注册类型 第三方登录 qq是3 微信是4
openid| F0DEC3FB366D7D938134A843A75B5E68|注册的openid

<pre>
<code>
array (
  'code' => 1,
  'msg' => 'Success',
  'data' =>
  array (
    'user_id' => 20190,
    'name' => '',
    'nick_name' => '',
    'imeil' => '974f8ce3917c47b4',
    'face' => '',
    'mobile' => '',
    'email' => '',
    'type' => 3,
  ),
)
</code>
</pre>

<pre>
<p>
提供第三方的注册和登录
1.当注册的类型不是3和4时候 msg会返回type错误
2.当传入的imeil与用户表的imeil不同的时候 会去更新imeil 如果更新失败 会返回imeil失败的数据
</p>
</pre>

#### 重置密码
api/user/reset_password

参数名|参数值|参数意义
---|---|---
mobile| 15623368710|手机注册
code| 792625|发送手机验证码
new_password| 123456|重新设置的信吗

<pre>
<code>
array (
  'code' => 1,
  'msg' => 'Success',
  'data' =>
  array (
  ),
)
</code>
</pre>

<pre>
<p>
通过发送验证码的方式验证用户并修改密码 可能返回的错误有
1.如果验证码校验不通过 返回验证码错误
2.如果手机号码不符合规格 返回手机号码错误
3.如果密码修改失败 返回密码修改失败
</p>
</pre>

#### 发送验证码
api/user/send_code

参数名|参数值|参数意义
---|---|---
ip| 61.183.177.210|ip地址
imeil| e51898dcb20e7e4e|手机标识
user_id| 0|如果登录需要user_id
mobile| 155272405779|手机号码

<pre>
<code>
array (
  'code' => 1,
  'msg' => '验证码发送成功',
  'data' => '',
)
</code>
</pre>

<pre>
<p>
手机发送验证码接口
每条短信在设定的时间内是有效的
每部手机都有设定的发送次数
</p>
</pre>

#### 更新用户
api/user/update

参数名|参数值|参数意义
---|---|---
ip| 61.183.177.210|ip地址
user_id| 16855|用户id必填
nick_name| 小明|昵称 选填
face| xxx.jpg|手机号码 选填
pwd| 123456|密码 选填
grade_id| 9|年级id 选填

<pre>
<code>
array (
  'code' => 1,
  'msg' => '修改成功',
  'data' => '',
)
</code>
</pre>

<pre>
<p>
如果没有传入user_id 将返回参数错误
修改失败 返回没有任何数据被修改
</p>
</pre>

#### 绑定手机号码  
api/user/bind_mobile

参数名|参数值|参数意义
---|---|---
mobile| 15527240579|手机号码
user_id| 16855|用户id
code| 123456|验证码

<pre>
<code>
array (
  'code' => 1,
  'msg' => 'Success',
  'data' =>
  array (
    'user_id' => 20190,
    'name' => '',
    'nick_name' => '',
    'imeil' => '974f8ce3917c47b4',
    'face' => '',
    'mobile' => '15527240579',
    'email' => '',
    'type' => 3,
  ),
)
</code>
</pre>

<pre>
<p>
绑定成功将返回用户的数据
</p>
</pre>


#### 获取用户信息  
api/user/user_info

参数名|参数值|参数意义
---|---|---
user_id| 16855|用户id

<pre>
<code>
array (
  'code' => 1,
  'msg' => 'Success',
  'data' =>
  array (
    'face' => 'http://thirdwx.qlogo.cn/mmopen/vi_32/V31zcibHMq57k0ktOpg0icNF3rKbsFUBNkEsX1UicNqyYjCugiahltv2x0NDDlGTY08kwTpPIb0dhXWaGVkDxPibg7A/132',
    'user_id' => 16860,
    'name' => NULL,
    'mobile' => '',
    'nick_name' => '说说英语Abby',
    'money' => '0.00',
    'imeil' => 'eec7b6ec01667082',
    'grade_id' => 0,    //年级id
    'type' => 4,      //注册方式
    'coin' => 0,      //金币
    'invite_code' => 'CAR5',  //邀请码
    'upload_times' => 0,  //剩余上传次数
    'has_vip' => 0,       //是否有vip
    'vip_start_time' => 0,   //vip开始时间
    'vip_end_time' => 0,    //vip结束时间
  ),
)
</code>
</pre>

<pre>
<p>
获取用户的数据 upload_times是根据金币除以上传单价得到 是否是vip 原先字段为 is_vip
后因为安卓端有冲突 字段名改为has_vip
</p>
</pre>

#### 上传用户头像   
api/user/upload_base64_face

参数名|参数值|参数意义
---|---|---
user_id| 16855|用户id
face| base64数据|头像

<pre>
<code>
array (
  'code' => 1,
  'msg' => 'Success',
  'data' =>
  array (
    'user_id' => 20190,
    'name' => '',
    'nick_name' => '',
    'imeil' => '974f8ce3917c47b4',
    'face' => '', //上传图片后的路径
    'mobile' => '',
    'email' => '',
    'type' => 2,
  ),
)
</code>
</pre>

<pre>
<p>
通过base64方式上传头像 user_id为必填参数
可能会出现的状态有 1.修改数据库状态失败 2.上传文件件失败
</p>
</pre>

#### 修改用户名   
api/user/username

参数名|参数值|参数意义
---|---|---
user_id| 16855|用户id
username| 殷桃小丸子|用户名

<pre>
<code>
array (
  'code' => 1,
  'msg' => 'Success',
  'data' =>
  array (
    'user_id' => 20190,
    'name' => '殷桃小丸子',
    'nick_name' => '',
    'imeil' => '974f8ce3917c47b4',
    'face' => '', //上传图片后的路径
    'mobile' => '',
    'email' => '',
    'type' => 2,
  ),
)
</code>
</pre>

<pre>
<p>
当没有用户名的时候可以添加用户名 当有用户名则不可以修改用户名
</p>
</pre>

#### 用户分享  
api/share/reward

<pre>
<code>
array (
  'code' => 1,
  'msg' => 'Success',
  'data' =>
  array (
    'user_id' => 20190,
    'name' => '殷桃小丸子',
    'nick_name' => '',
    'imeil' => '974f8ce3917c47b4',
    'face' => '', //上传图片后的路径
    'mobile' => '',
    'email' => '',
    'type' => 2,
  ),
)
</code>
</pre>

<pre>
<p>
当没有用户名的时候可以添加用户名 当有用户名则不可以修改用户名
</p>
</pre>


批改作业模块

#### 作业上传
api/homework/upload
参数
结果

接口  
api/homework_task/lists
参数
结果

接口  
api/homework_task/detail
参数
结果

接口  
api/homework_task/hot_shows
参数
结果

接口  
api/homework_task/hot_detail
参数
结果

接口  
api/homework_task/history_shows
参数
结果

接口  
api/homework_task/history_detail
参数
结果

接口  
api/coin/bill
参数
结果

接口  
api/homework/question
参数
结果

接口 返回作业任务的状态数量
api/homework_task/count_status
参数
  'user_id' => '16852',  用户id
结果
array (
  'code' => 1,
  'msg' => 'Success',
  'data' =>
  array (
    'add_date' => '20190225',
    'user_id' => '16852',
    'login_reward' => 2,     //登录奖励天数
  ),
)

接口  
api/homework_task/is_read
参数
结果

接口  
api/teacher/apply_page
参数
结果

接口  
api/teacher/apply_for_teacher
参数
结果

接口  
api/teacher/teacher_status
参数
结果

接口  
api/jpush/info
参数
结果

接口  
api/jpush/index
参数
结果

接口  
api/jpush/notsee
参数
array (
  'user_id' => '16852',
)

结果
